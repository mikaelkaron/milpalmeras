import { Machine, interpret } from "xstate";
import { inspect } from "@xstate/inspect";
import "./styles.css";

const mergeMeta: <T extends Record<string, any>>(
  source: T,
  target?: T | {}
) => T = (source, target = {}) =>
  Object.keys(source)
    .sort()
    .reduce((result, key) => Object.assign(result, source[key]), target);

inspect({
  url: "https://statecharts.io/inspect",
  iframe: false
});

const app = document.getElementById("app");

const svg_home = `<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 412.68318496942527 518.5">
<!-- svg-source:excalidraw -->

<defs>
  <style>
    @font-face {
      font-family: "Virgil";
      src: url("https://excalidraw.com/FG_Virgil.woff2");
    }
    @font-face {
      font-family: "Cascadia";
      src: url("https://excalidraw.com/Cascadia.woff2");
    }
  </style>
</defs>
<rect x="0" y="0" width="412.68318496942527" height="518.5" fill="#ffffff"></rect><g transform="translate(11.091314487531804 10) rotate(0 195.25 249.25)"><path d="M-0.905514484288628 -0.8169326963634838 C81.88280555672152 1.357175811082692, 162.73646657294415 1.120194424073989, 391.64627803896303 -0.629781216410588 M-0.14614776648799124 -0.08139294182567951 C83.51286115415135 -0.6014463200960831, 166.92407934887575 -1.1196718925487057, 390.69334344527437 -0.27491956023945563 M390.37063805536894 -0.2613820845588583 C389.9501671962621 137.81983911643627, 390.1427620680354 276.487555384971, 391.0899280067606 498.6708223400156 M390.1325498578495 -0.30088094843301977 C392.41045864101045 192.72182344487928, 392.5801167737778 385.2426145855772, 390.3544239054007 498.7023379976901 M391.4602608211344 497.66071457714764 C274.99199148185863 498.4702792104858, 160.4155769365698 499.01250368579474, 1.035302196556573 499.48244998233474 M390.985051504321 497.98744507801 C243.62757842258904 498.8950381147474, 97.85913936551589 498.6143265867402, 0.38802732558767256 498.58495464254185 M0.16324787215156145 498.97640062802293 C-0.7342482987287189 313.2810550445494, -0.9770921316009785 130.2608635717551, 0.03682022757530994 0.19977808778645803 M-0.25890505480609033 498.89061465521354 C-0.4423370448278725 376.16038757555094, -0.34107740511741635 254.92064532268068, -0.08266761415982934 0.08912409087716731" stroke="#000000" stroke-width="1" fill="none"></path></g><g><g transform="translate(10.591314487531804 446.5) rotate(0 195.75027799718083 0.3389435738324664)"><path d="M-0.5913144875317812 -0.1416276466101407 C64.59077460678915 0.1643776524811984, 326.6934113771965 0.4772553194314242, 392.0918704818934 0.7800314772874117 M1.299106677174568 -1.2615861064195633 C66.33127125720182 -0.7218102771043777, 326.69133348127207 1.2151411503553389, 391.71705702126025 1.9394732540845872" stroke="#000000" stroke-width="1" fill="none"></path></g></g><g transform="translate(28.091314487531804 457) rotate(0 74.25 20.5)"><path d="M0 0 C39.09493064093404 0, 78.18986128186808 0, 148.5 0 M0 0 C46.810861277254304 0, 93.62172255450861 0, 148.5 0 M148.5 0 C148.5 11.153907125350088, 148.5 22.307814250700176, 148.5 41 M148.5 0 C148.5 13.911663117352873, 148.5 27.823326234705746, 148.5 41 M148.5 41 C92.53887743842787 41, 36.57775487685575 41, 0 41 M148.5 41 C114.6157702777069 41, 80.7315405554138 41, 0 41 M0 41 C0 30.02221905076876, 0 19.044438101537523, 0 0 M0 41 C0 32.352264169510455, 0 23.704528339020907, 0 0" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(78.8413144875318 461.5) rotate(0 23.5 16)"><text x="23.5" y="23" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr">guide</text></g><g transform="translate(236.8413144875318 457) rotate(0 74.25 20.5)"><path d="M0 0 C36.58180164503865 0, 73.1636032900773 0, 148.5 0 M0 0 C31.20447962251492 0, 62.40895924502984 0, 148.5 0 M148.5 0 C148.5 13.66780111109838, 148.5 27.33560222219676, 148.5 41 M148.5 0 C148.5 16.322761502210053, 148.5 32.645523004420106, 148.5 41 M148.5 41 C116.2348280895967 41, 83.96965617919341 41, 0 41 M148.5 41 C108.82180098029784 41, 69.14360196059569 41, 0 41 M0 41 C0 25.469085563067345, 0 9.93817112613469, 0 0 M0 41 C0 32.5609716928564, 0 24.1219433857128, 0 0" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(278.0913144875318 461.5) rotate(0 33 16)"><text x="33" y="23" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr">housing</text></g></svg>`;

const svg_guide = `<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 412.68318496942527 518.5">
<!-- svg-source:excalidraw -->

<defs>
  <style>
    @font-face {
      font-family: "Virgil";
      src: url("https://excalidraw.com/FG_Virgil.woff2");
    }
    @font-face {
      font-family: "Cascadia";
      src: url("https://excalidraw.com/Cascadia.woff2");
    }
  </style>
</defs>
<rect x="0" y="0" width="412.68318496942527" height="518.5" fill="#ffffff"></rect><g transform="translate(11.091314487531804 10) rotate(0 195.25 249.25)"><path d="M-0.905514484288628 -0.8169326963634838 C81.88280555672152 1.357175811082692, 162.73646657294415 1.120194424073989, 391.64627803896303 -0.629781216410588 M-0.14614776648799124 -0.08139294182567951 C83.51286115415135 -0.6014463200960831, 166.92407934887575 -1.1196718925487057, 390.69334344527437 -0.27491956023945563 M390.37063805536894 -0.2613820845588583 C389.9501671962621 137.81983911643627, 390.1427620680354 276.487555384971, 391.0899280067606 498.6708223400156 M390.1325498578495 -0.30088094843301977 C392.41045864101045 192.72182344487928, 392.5801167737778 385.2426145855772, 390.3544239054007 498.7023379976901 M391.4602608211344 497.66071457714764 C274.99199148185863 498.4702792104858, 160.4155769365698 499.01250368579474, 1.035302196556573 499.48244998233474 M390.985051504321 497.98744507801 C243.62757842258904 498.8950381147474, 97.85913936551589 498.6143265867402, 0.38802732558767256 498.58495464254185 M0.16324787215156145 498.97640062802293 C-0.7342482987287189 313.2810550445494, -0.9770921316009785 130.2608635717551, 0.03682022757530994 0.19977808778645803 M-0.25890505480609033 498.89061465521354 C-0.4423370448278725 376.16038757555094, -0.34107740511741635 254.92064532268068, -0.08266761415982934 0.08912409087716731" stroke="#000000" stroke-width="1" fill="none"></path></g><g><g transform="translate(10.591314487531804 446.5) rotate(0 195.75027799718083 0.3389435738324664)"><path d="M-0.5913144875317812 -0.1416276466101407 C64.59077460678915 0.1643776524811984, 326.6934113771965 0.4772553194314242, 392.0918704818934 0.7800314772874117 M1.299106677174568 -1.2615861064195633 C66.33127125720182 -0.7218102771043777, 326.69133348127207 1.2151411503553389, 391.71705702126025 1.9394732540845872" stroke="#000000" stroke-width="1" fill="none"></path></g></g><g transform="translate(28.091314487531804 457) rotate(0 74.25 20.5)"><path d="M0 0 C39.09493064093404 0, 78.18986128186808 0, 148.5 0 M0 0 C46.810861277254304 0, 93.62172255450861 0, 148.5 0 M148.5 0 C148.5 11.153907125350088, 148.5 22.307814250700176, 148.5 41 M148.5 0 C148.5 13.911663117352873, 148.5 27.823326234705746, 148.5 41 M148.5 41 C92.53887743842787 41, 36.57775487685575 41, 0 41 M148.5 41 C114.6157702777069 41, 80.7315405554138 41, 0 41 M0 41 C0 30.02221905076876, 0 19.044438101537523, 0 0 M0 41 C0 32.352264169510455, 0 23.704528339020907, 0 0" stroke="#000000" stroke-width="4" fill="none"></path></g><g transform="translate(78.8413144875318 461.5) rotate(0 23.5 16)"><text x="23.5" y="23" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr">guide</text></g><g transform="translate(236.8413144875318 457) rotate(0 74.25 20.5)"><path d="M0 0 C36.58180164503865 0, 73.1636032900773 0, 148.5 0 M0 0 C31.20447962251492 0, 62.40895924502984 0, 148.5 0 M148.5 0 C148.5 13.66780111109838, 148.5 27.33560222219676, 148.5 41 M148.5 0 C148.5 16.322761502210053, 148.5 32.645523004420106, 148.5 41 M148.5 41 C116.2348280895967 41, 83.96965617919341 41, 0 41 M148.5 41 C108.82180098029784 41, 69.14360196059569 41, 0 41 M0 41 C0 25.469085563067345, 0 9.93817112613469, 0 0 M0 41 C0 32.5609716928564, 0 24.1219433857128, 0 0" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(278.0913144875318 461.5) rotate(0 33 16)"><text x="33" y="23" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr">housing</text></g></svg>`;

const svg_housing = `<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 412.68318496942527 518.5">
<!-- svg-source:excalidraw -->

<defs>
  <style>
    @font-face {
      font-family: "Virgil";
      src: url("https://excalidraw.com/FG_Virgil.woff2");
    }
    @font-face {
      font-family: "Cascadia";
      src: url("https://excalidraw.com/Cascadia.woff2");
    }
  </style>
</defs>
<rect x="0" y="0" width="412.68318496942527" height="518.5" fill="#ffffff"></rect><g transform="translate(11.091314487531804 10) rotate(0 195.25 249.25)"><path d="M-0.905514484288628 -0.8169326963634838 C81.88280555672152 1.357175811082692, 162.73646657294415 1.120194424073989, 391.64627803896303 -0.629781216410588 M-0.14614776648799124 -0.08139294182567951 C83.51286115415135 -0.6014463200960831, 166.92407934887575 -1.1196718925487057, 390.69334344527437 -0.27491956023945563 M390.37063805536894 -0.2613820845588583 C389.9501671962621 137.81983911643627, 390.1427620680354 276.487555384971, 391.0899280067606 498.6708223400156 M390.1325498578495 -0.30088094843301977 C392.41045864101045 192.72182344487928, 392.5801167737778 385.2426145855772, 390.3544239054007 498.7023379976901 M391.4602608211344 497.66071457714764 C274.99199148185863 498.4702792104858, 160.4155769365698 499.01250368579474, 1.035302196556573 499.48244998233474 M390.985051504321 497.98744507801 C243.62757842258904 498.8950381147474, 97.85913936551589 498.6143265867402, 0.38802732558767256 498.58495464254185 M0.16324787215156145 498.97640062802293 C-0.7342482987287189 313.2810550445494, -0.9770921316009785 130.2608635717551, 0.03682022757530994 0.19977808778645803 M-0.25890505480609033 498.89061465521354 C-0.4423370448278725 376.16038757555094, -0.34107740511741635 254.92064532268068, -0.08266761415982934 0.08912409087716731" stroke="#000000" stroke-width="1" fill="none"></path></g><g><g transform="translate(10.591314487531804 446.5) rotate(0 195.75027799718083 0.3389435738324664)"><path d="M-0.5913144875317812 -0.1416276466101407 C64.59077460678915 0.1643776524811984, 326.6934113771965 0.4772553194314242, 392.0918704818934 0.7800314772874117 M1.299106677174568 -1.2615861064195633 C66.33127125720182 -0.7218102771043777, 326.69133348127207 1.2151411503553389, 391.71705702126025 1.9394732540845872" stroke="#000000" stroke-width="1" fill="none"></path></g></g><g transform="translate(28.091314487531804 457) rotate(0 74.25 20.5)"><path d="M0 0 C39.09493064093404 0, 78.18986128186808 0, 148.5 0 M0 0 C46.810861277254304 0, 93.62172255450861 0, 148.5 0 M148.5 0 C148.5 11.153907125350088, 148.5 22.307814250700176, 148.5 41 M148.5 0 C148.5 13.911663117352873, 148.5 27.823326234705746, 148.5 41 M148.5 41 C92.53887743842787 41, 36.57775487685575 41, 0 41 M148.5 41 C114.6157702777069 41, 80.7315405554138 41, 0 41 M0 41 C0 30.02221905076876, 0 19.044438101537523, 0 0 M0 41 C0 32.352264169510455, 0 23.704528339020907, 0 0" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(78.8413144875318 461.5) rotate(0 23.5 16)"><text x="23.5" y="23" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr">guide</text></g><g transform="translate(236.8413144875318 457) rotate(0 74.25 20.5)"><path d="M0 0 C36.58180164503865 0, 73.1636032900773 0, 148.5 0 M0 0 C31.20447962251492 0, 62.40895924502984 0, 148.5 0 M148.5 0 C148.5 13.66780111109838, 148.5 27.33560222219676, 148.5 41 M148.5 0 C148.5 16.322761502210053, 148.5 32.645523004420106, 148.5 41 M148.5 41 C116.2348280895967 41, 83.96965617919341 41, 0 41 M148.5 41 C108.82180098029784 41, 69.14360196059569 41, 0 41 M0 41 C0 25.469085563067345, 0 9.93817112613469, 0 0 M0 41 C0 32.5609716928564, 0 24.1219433857128, 0 0" stroke="#000000" stroke-width="4" fill="none"></path></g><g transform="translate(278.0913144875318 461.5) rotate(0 33 16)"><text x="33" y="23" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr">housing</text></g></svg>`;

const svg_guide_map = `<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 412.68318496942527 518.5">
<!-- svg-source:excalidraw -->

<defs>
  <style>
    @font-face {
      font-family: "Virgil";
      src: url("https://excalidraw.com/FG_Virgil.woff2");
    }
    @font-face {
      font-family: "Cascadia";
      src: url("https://excalidraw.com/Cascadia.woff2");
    }
  </style>
</defs>
<rect x="0" y="0" width="412.68318496942527" height="518.5" fill="#ffffff"></rect><g transform="translate(11.091314487531804 10) rotate(0 195.25 249.25)"><path d="M-0.905514484288628 -0.8169326963634838 C81.88280555672152 1.357175811082692, 162.73646657294415 1.120194424073989, 391.64627803896303 -0.629781216410588 M-0.14614776648799124 -0.08139294182567951 C83.51286115415135 -0.6014463200960831, 166.92407934887575 -1.1196718925487057, 390.69334344527437 -0.27491956023945563 M390.37063805536894 -0.2613820845588583 C389.9501671962621 137.81983911643627, 390.1427620680354 276.487555384971, 391.0899280067606 498.6708223400156 M390.1325498578495 -0.30088094843301977 C392.41045864101045 192.72182344487928, 392.5801167737778 385.2426145855772, 390.3544239054007 498.7023379976901 M391.4602608211344 497.66071457714764 C274.99199148185863 498.4702792104858, 160.4155769365698 499.01250368579474, 1.035302196556573 499.48244998233474 M390.985051504321 497.98744507801 C243.62757842258904 498.8950381147474, 97.85913936551589 498.6143265867402, 0.38802732558767256 498.58495464254185 M0.16324787215156145 498.97640062802293 C-0.7342482987287189 313.2810550445494, -0.9770921316009785 130.2608635717551, 0.03682022757530994 0.19977808778645803 M-0.25890505480609033 498.89061465521354 C-0.4423370448278725 376.16038757555094, -0.34107740511741635 254.92064532268068, -0.08266761415982934 0.08912409087716731" stroke="#000000" stroke-width="1" fill="none"></path></g><g><g transform="translate(10.591314487531804 446.5) rotate(0 195.75027799718083 0.3389435738324664)"><path d="M-0.5913144875317812 -0.1416276466101407 C64.59077460678915 0.1643776524811984, 326.6934113771965 0.4772553194314242, 392.0918704818934 0.7800314772874117 M1.299106677174568 -1.2615861064195633 C66.33127125720182 -0.7218102771043777, 326.69133348127207 1.2151411503553389, 391.71705702126025 1.9394732540845872" stroke="#000000" stroke-width="1" fill="none"></path></g></g><g transform="translate(28.591314487531804 457) rotate(0 74.25 20.5)"><path d="M0 0 C39.09493064093404 0, 78.18986128186808 0, 148.5 0 M0 0 C46.810861277254304 0, 93.62172255450861 0, 148.5 0 M148.5 0 C148.5 11.153907125350088, 148.5 22.307814250700176, 148.5 41 M148.5 0 C148.5 13.911663117352873, 148.5 27.823326234705746, 148.5 41 M148.5 41 C92.53887743842787 41, 36.57775487685575 41, 0 41 M148.5 41 C114.6157702777069 41, 80.7315405554138 41, 0 41 M0 41 C0 30.02221905076876, 0 19.044438101537523, 0 0 M0 41 C0 32.352264169510455, 0 23.704528339020907, 0 0" stroke="#000000" stroke-width="4" fill="none"></path></g><g transform="translate(79.3413144875318 461.5) rotate(0 23.5 16)"><text x="23.5" y="23" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr">guide</text></g><g transform="translate(236.8413144875318 457) rotate(0 74.25 20.5)"><path d="M0 0 C36.58180164503865 0, 73.1636032900773 0, 148.5 0 M0 0 C31.20447962251492 0, 62.40895924502984 0, 148.5 0 M148.5 0 C148.5 13.66780111109838, 148.5 27.33560222219676, 148.5 41 M148.5 0 C148.5 16.322761502210053, 148.5 32.645523004420106, 148.5 41 M148.5 41 C116.2348280895967 41, 83.96965617919341 41, 0 41 M148.5 41 C108.82180098029784 41, 69.14360196059569 41, 0 41 M0 41 C0 25.469085563067345, 0 9.93817112613469, 0 0 M0 41 C0 32.5609716928564, 0 24.1219433857128, 0 0" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(278.0913144875318 461.5) rotate(0 33 16)"><text x="33" y="23" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="middle" style="white-space: pre;" direction="ltr">housing</text></g><g transform="translate(27.591314487531804 28) rotate(0 180 154.25)"><path d="M0 0 C113.46742555126549 0, 226.93485110253098 0, 360 0 M0 0 C75.73356256261468 0, 151.46712512522936 0, 360 0 M360 0 C360 69.38695255774074, 360 138.77390511548148, 360 308.5 M360 0 C360 102.67298128721305, 360 205.3459625744261, 360 308.5 M360 308.5 C263.9647980071604 308.5, 167.92959601432082 308.5, 0 308.5 M360 308.5 C236.37238755449653 308.5, 112.74477510899308 308.5, 0 308.5 M0 308.5 C0 203.12617576164195, 0 97.75235152328386, 0 0 M0 308.5 C0 238.737145884661, 0 168.974291769322, 0 0" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(36.091314487531804 48.5) rotate(0 91.75 91.5)"><path d="M91.75 0 C103.370849383699 -1.397704308263016, 117.23602221304655 2.7584278430648297, 128.4474191064179 7.63774150421888 C139.65881599978925 12.51705516537293, 150.69974916355415 20.33183249077792, 159.0183813602281 29.275881966924302 C167.33701355690204 38.219931443070685, 174.32210024849303 49.78641892569072, 178.3592122864615 61.30203836109719 C182.39632432443 72.81765779650367, 184.15943806220923 86.20488622313579, 183.24105358803897 98.36959857936314 C182.3226691138687 110.5343109355905, 178.5694665760505 123.50734718753424, 172.84890544143983 134.29031249846133 C167.12834430682915 145.07327780938843, 158.48540452722412 155.46633615074853, 148.91768678037496 163.06739044492576 C139.3499690335258 170.668444739103, 127.26018905854163 176.74645428355, 115.44259896034497 179.89663826352472 C103.6250088621483 183.04682224349943, 90.1067190588191 183.79508865746695, 78.01214619119497 181.96849432477404 C65.91757332357085 180.14189999208114, 53.22758687434356 175.4355038122648, 42.87516175460022 168.93707226736723 C32.522736634856884 162.43864072246964, 22.779585478337793 153.06329205680137, 15.897595472734949 142.9779050553885 C9.015605467132104 132.89251805397564, 3.845861624523932 120.41338607448372, 1.5832217209831612 108.42475025889 C-0.6794181825576096 96.43611444329628, -0.4126909492249715 82.9365299533991, 2.3217560514903255 71.04609016182617 C5.056203052205623 59.15565037025324, 10.714872538302487 46.88930379067643, 17.989903725274942 37.08211150945243 C25.264934912247398 27.274919228228434, 35.370859114657776 18.289617867736272, 45.971943173325066 12.202936474482172 C56.573027231992356 6.116255081228071, 73.96673193949954 2.5958458956748536, 81.5964080772787 0.5620231499278248 C89.22608421505785 -1.471799595819204, 90.05773467954643 -0.21132947501202892, 91.74999999999999 0 C93.44226532045354 0.21132947501202892, 91.75 0.3049999999999997, 91.75 1.8299999999999983 M91.75 0 C103.370849383699 -1.397704308263016, 117.23602221304655 2.7584278430648297, 128.4474191064179 7.63774150421888 C139.65881599978925 12.51705516537293, 150.69974916355415 20.33183249077792, 159.0183813602281 29.275881966924302 C167.33701355690204 38.219931443070685, 174.32210024849303 49.78641892569072, 178.3592122864615 61.30203836109719 C182.39632432443 72.81765779650367, 184.15943806220923 86.20488622313579, 183.24105358803897 98.36959857936314 C182.3226691138687 110.5343109355905, 178.5694665760505 123.50734718753424, 172.84890544143983 134.29031249846133 C167.12834430682915 145.07327780938843, 158.48540452722412 155.46633615074853, 148.91768678037496 163.06739044492576 C139.3499690335258 170.668444739103, 127.26018905854163 176.74645428355, 115.44259896034497 179.89663826352472 C103.6250088621483 183.04682224349943, 90.1067190588191 183.79508865746695, 78.01214619119497 181.96849432477404 C65.91757332357085 180.14189999208114, 53.22758687434356 175.4355038122648, 42.87516175460022 168.93707226736723 C32.522736634856884 162.43864072246964, 22.779585478337793 153.06329205680137, 15.897595472734949 142.9779050553885 C9.015605467132104 132.89251805397564, 3.845861624523932 120.41338607448372, 1.5832217209831612 108.42475025889 C-0.6794181825576096 96.43611444329628, -0.4126909492249715 82.9365299533991, 2.3217560514903255 71.04609016182617 C5.056203052205623 59.15565037025324, 10.714872538302487 46.88930379067643, 17.989903725274942 37.08211150945243 C25.264934912247398 27.274919228228434, 35.370859114657776 18.289617867736272, 45.971943173325066 12.202936474482172 C56.573027231992356 6.116255081228071, 73.96673193949954 2.5958458956748536, 81.5964080772787 0.5620231499278248 C89.22608421505785 -1.471799595819204, 90.05773467954643 -0.21132947501202892, 91.74999999999999 0 C93.44226532045354 0.21132947501202892, 91.75 0.3049999999999997, 91.75 1.8299999999999983" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(231.5913144875318 110) rotate(0 67.5 89.5)"><path d="M68 0 C85.45113188205286 23.44181894604117, 102.90226376410574 46.88363789208234, 135 90 M68 0 C91.34988865824417 31.365522078238428, 114.69977731648834 62.731044156476855, 135 90 M135 90 C112.95584362866357 119.28253607535734, 90.91168725732715 148.56507215071468, 68 179 M135 90 C119.41913695065304 110.69696733420714, 103.8382739013061 131.3939346684143, 68 179 M68 179 C42.991204094514245 146.26789947664366, 17.982408189028497 113.5357989532873, 0 90 M68 179 C52.87474523223936 159.2037106716074, 37.749490464478725 139.40742134321482, 0 90 M0 90 C18.704950178042054 65.24344829376787, 37.40990035608411 40.48689658753574, 68 0 M0 90 C17.520674401149154 66.81087211612612, 35.04134880229831 43.62174423225223, 68 0" stroke="#000000" stroke-width="1" fill="none"></path></g><g transform="translate(50.091314487531804 286.5) rotate(0 18.5 16)"><text x="0" y="23" font-family="Virgil, Segoe UI Emoji" font-size="20px" fill="#000000" text-anchor="start" style="white-space: pre;" direction="ltr">map</text></g></svg>`;

interface ToggleContext {}

// Edit your machine(s) here
const machine = Machine<ToggleContext>({
  id: "machine",
  initial: "guide",
  meta: {
    svg: svg_home
  },
  context: {},
  states: {
    guide: {
      initial: "map",
      meta: {
        svg: svg_guide
      },
      states: {
        map: {
          meta: {
            svg: svg_guide_map
          }
        },
        locations: {
          initial: "list",
          states: {
            list: {},
            location: {}
          }
        },
        activities: {
          initial: "list",
          states: {
            list: {
              initial: "popular",
              states: {
                popular: {},
                calendar: {}
              }
            },
            activity: {}
          }
        }
      }
    },
    housing: {
      initial: "rentals",
      meta: {
        svg: svg_housing
      },
      states: {
        rentals: {
          initial: "list",
          states: {
            list: {},
            rental: {}
          }
        },
        properties: {
          initial: "list",
          states: {
            list: {},
            property: {}
          }
        }
      }
    },
    services: {
      initial: "list",
      states: {
        list: {},
        service: {}
      }
    }
  },
  on: {
    GUIDE: "guide",
    HOUSING: "housing",
    RENTALS: "housing.rentals",
    RENTAL: "housing.rentals.rental",
    PROPERTIES: "housing.properties",
    PROPERTY: "housing.properties.property",
    LOCATIONS: "guide.locations",
    LOCATION: "guide.locations.location",
    SERVICES: "services",
    SERVICE: "services.service",
    ACTIVITIES: "guide.activities",
    ACTIVITY: "guide.activities.activity",
    POPULAR: "guide.activities.list.popular",
    CALENDAR: "guide.activities.list.calendar"
  }
});

// Edit your service(s) here
const service = interpret(machine, { devTools: true }).onTransition((state) => {
  const { svg } = mergeMeta(state.meta);
  app.innerHTML = svg;
});

service.start();
